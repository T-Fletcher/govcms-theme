!function(e,a,n,r,t){a.behaviors.validateEasyBakeOrderForm={attach:function(a,t){function s(e){var a=r.getElementsByClassName("messages validate");if(0==a.length){var n,t,s=r.getElementById("page-title"),i=r.createElement("div"),l=r.createElement("h2"),m=r.createElement("ul");if(i.className="messages--error messages error validate",l.className="element-invisible",l.innerHTML="Error message",i.appendChild(l),e.length>1){m.className="messages__list";for(var o=0;o<e.length;o++)n=r.createElement("li"),n.className="messages__item",t=r.createElement("pre"),t.innerHTML=e[o].message,n.appendChild(t),m.appendChild(n);i.appendChild(m)}else t=r.createTextNode(e[0].message),i.appendChild(t);s.parentNode.insertBefore(i,s.nextSibling)}}function i(a,r){if(m){var t={contact_name:a.find("input[name='contact_name']").val(),contact_email:a.find("input[name='contact_email']").val(),contact_phone:a.find("input[name='phone_number']").val(),site_name:a.find("input[name='site_name']").val(),agency_name:a.find("input[name='agency_name']").val()},i=a.find("textarea[name='website_purpose']").val();i&&(t.website_purpose=i);var l=m+"/order/submit";e.ajax({url:l,type:"POST",data:t,async:!1,success:function(e){o&&n.location.replace(o)},error:function(e,a){var n,r=JSON.parse(e.response),t="Error: ";t+=r.error,t+="\nDetails: ",r.details&&(t+=r.details.message),n=[{message:t}],s(n)}})}else{var c="This form cannot be submitted at the moment. Please contact your administrator for more information.",d=[{message:c}];s(d)}r.preventDefault()}var l,m,o,c;if(t.ezBake&&(t.ezBake.bakerURL&&(m=t.ezBake.bakerURL),t.ezBake.confirmPageURL&&(o=t.ezBake.confirmPageURL),t.ezBake.errorPageURL&&(c=t.ezBake.errorPageURL)),l=e('form[name="easybake-order-form"]'),l&&l.length>0){var d=new FormValidator("easybake-order-form",[{name:"contact_name",display:"name",rules:"required"},{name:"contact_email",display:"email",rules:"required|valid_email|callback_gov_email"},{name:"phone_number",display:"phone number",rules:"required"},{name:"site_name",display:"site name",rules:"required"},{name:"agency_name",display:"agency name",rules:"required"}],function(a,n){if(a.length>0)s(a);else{var t=r.getElementsByClassName("messages validate");t.length>0&&t[0].parentNode.removeChild(t[0]);var l=n.target||n.srcElement;i(e(l),n)}});d.registerCallback("gov_email",function(e){return/gov\.au$/.test(e)}).setMessage("gov_email","We're sorry, the govCMS service is only available to Australian government entities so we require you to have a valid .gov.au email address. If you are part of a government entity that doesn't use .gov.au email addresses, please get in touch and we can help you.")}}}}(jQuery,Drupal,this,this.document);